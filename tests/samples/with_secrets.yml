service_id: secure-service
service_name: secure-service
service_image: registry.example.com/secure/app@sha256:0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
service_env:
  - name: APP_MODE
    value: secure
service_volumes:
  - name: tls
    source: secure-tls
    target: /etc/ssl/private
service_packages: []
service_files: []
service_services: []
service_commands: []
service_resources:
  memory_mb: 256
  cpu_cores: 1
service_namespace: secure
service_replicas: 2
service_storage_gb: 4
runtime_templates:
  proxmox: templates/proxmox.yml.j2
  docker: templates/docker.yml.j2
  podman: templates/podman.yml.j2
  kubernetes: templates/kubernetes.yml.j2
  baremetal: templates/baremetal.yml.j2
exports:
  env:
    - name: SECURE_URL
      value: https://secure.local
storage:
  - name: secrets
    path: /var/lib/secure
health:
  cmd:
    - /bin/sh
    - -c
    - "exit 0"
needs_container_runtime: true
secrets:
  shred_after_apply: true
  env:
    - name: SECURE_TOKEN
      value: changeme
  files:
    - name: tls-key
      value: secret-tls-key
      target: /etc/ssl/private/tls.key
      mode: '0400'
