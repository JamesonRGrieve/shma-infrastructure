---
type: object
required:
  - container_ip
  - container
  - setup
properties:
  container_ip:
    type: string
  container:
    type: object
    required:
      - vmid
      - hostname
      - ostemplate
      - disk
      - cores
      - memory
      - swap
      - netif
      - onboot
      - unprivileged
    properties:
      vmid:
        type: string
      hostname:
        type: string
      ostemplate:
        type: string
      disk:
        type: string
      cores:
        type: string
      memory:
        type: string
      swap:
        type: string
      netif:
        type: object
        additionalProperties:
          type: string
      onboot:
        type: string
      unprivileged:
        type: string
      features:
        type: string
      firewall:
        type: object
        properties:
          enabled:
            type: boolean
          default_inbound_policy:
            type: string
          default_outbound_policy:
            type: string
          default_forward_policy:
            type: string
          log_level:
            type: string
          rules:
            type: array
            items:
              type: object
              properties:
                action:
                  type: string
                direction:
                  type: string
                interface:
                  type: string
                macro:
                  type: string
                source:
                  type: string
                destination:
                  type: string
                protocol:
                  type: string
                source_port:
                  type: string
                destination_port:
                  type: string
                icmp_type:
                  type: string
                enable:
                  type: boolean
                log:
                  type: boolean
                comment:
                  type: string
  setup:
    type: object
    required:
      - packages
      - config
      - services
      - commands
    properties:
      packages:
        type: array
        items:
          type: string
      config:
        type: array
        items:
          type: object
          properties:
            path:
              type: string
            content:
              type: string
            mode:
              type: string
      services:
        type: array
        items:
          type: object
          properties:
            name:
              type: string
            enabled:
              type: boolean
            state:
              type: string
      commands:
        type: array
        items:
          type: string
additionalProperties: false
